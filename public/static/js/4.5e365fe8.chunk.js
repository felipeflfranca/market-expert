(this["webpackJsonpmarket-expert"]=this["webpackJsonpmarket-expert"]||[]).push([[4],{236:function(e,t,c){"use strict";c.r(t);var a=c(172),n=c(202),r=c.n(n),i=c(204),s=c(25),o=c(30),l=c(179),d=c(136),x=c(178),j=c(193),p=c(138),b=c(237),h=c(208),u=c.n(h),O=c(33),g=c(15),m=c(0),f=c(238),y=c(239),v=c(235),A=c(205),k=c.n(A),C=c(1),F=function(e){var t=e.children;return Object(C.jsx)(C.Fragment,{children:t?parseFloat(t).toLocaleString("pt-br",{style:"currency",currency:"BRL"}):""})},T=c(18),w=c(207),S=c.n(w),R=c(241),I=c(240),D=c(243),E=c(242),q=c(206),B=c.n(q),L=Object(s.b)((function(e){return{sales:e.sales}}))((function(e){var t=e.sales,c=e.product,n=e.addToBagVisible,r=e.quantity,i=e.dispatch,s=Object(m.useState)(!1),o=Object(g.a)(s,2),l=o[0],p=o[1],h=Object(m.useState)(!1),u=Object(g.a)(h,2),A=u[0],w=u[1],q=Object(m.useState)(1),L=Object(g.a)(q,2),N=L[0],P=L[1],Q=function(){p(!1)},J=function(){w(!1)},V=n?Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{style:{marginTop:"-5px"},children:[Object(C.jsx)(a.a,{style:{textAlign:"left",paddingLeft:"10px"},children:Object(C.jsx)("small",{children:"Quantidade:"})}),Object(C.jsx)(a.a,{children:Object(C.jsxs)(x.a,{component:"form",sx:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(j.c,{sx:{ml:1,flex:1},label:"Quantidade",placeholder:"Quantidade",inputProps:{"aria-label":"Quantidade"},style:{border:"1px solid #cecece",borderRadius:"10px 1px 0px 10px",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"10px",height:"46px"},type:"number",value:N,onChange:function(e){var t=e.target.value?parseInt(e.target.value,10):1;P(t<1?1:t)}}),Object(C.jsx)(b.a,{color:"primary",sx:{p:"10px",color:"secondary.dark"},style:{backgroundColor:"#2196f3",color:"#ffffff",borderRadius:"0px 10px 10px 0px",border:"1px solid #2196f4"},"aria-label":"directions",onClick:function(){var e=N;t.bag["code-".concat(c.code)]&&(e=t.bag["code-".concat(c.code)].quantity+N),t.bag["code-".concat(c.code)]={product:c,quantity:e,total:(e*parseFloat(c.value)).toFixed(2)},i({type:T.a,bag:t.bag})},children:Object(C.jsx)(k.a,{})})]})})]})}):Object(C.jsx)(C.Fragment,{}),H=r?(r*c.value).toFixed(2):c.value,U=!r&&n?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(a.a,{item:!0,children:[Object(C.jsxs)(a.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,sx:{textAlign:"right"},children:[Object(C.jsx)("small",{children:"Quantidade:"})," ",Object(C.jsx)("strong",{children:r})]}),Object(C.jsx)(a.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,sx:{textAlign:"right",padding:"0px"},children:Object(C.jsxs)(f.a,{size:"small","aria-label":"small button group",children:[Object(C.jsx)(y.a,{endIcon:Object(C.jsx)(B.a,{sx:{margin:"3px 3px 3px -6px",color:"error.dark"}}),style:{border:"0px"},onClick:function(){w(!0)}}),Object(C.jsx)(y.a,{endIcon:Object(C.jsx)(S.a,{sx:{margin:"3px 3px 3px -6px"}}),style:{border:"0px"},onClick:function(){p(!0)}})]})})]}),Object(C.jsx)(I.a,{open:l,onClose:Q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",id:"dialog-edit",children:Object(C.jsxs)(O.a,{content:!1,style:{padding:"20px"},children:[Object(C.jsx)(R.a,{style:{textAlign:"center"},children:Object(C.jsxs)(a.a,{item:!0,xs:12,md:12,children:[Object(C.jsx)(d.a,{variant:"h3",sx:{color:"#707070",pb:5},children:"EDITAR QUANTIDADE DO PRODUTO NA SACOLA"}),Object(C.jsx)(d.a,{variant:"h2",children:"".concat(c.code," - ").concat(c.description)})]})}),Object(C.jsx)(E.a,{style:{padding:"0px",height:"100px"},children:Object(C.jsxs)(a.a,{container:!0,spacing:0,children:[Object(C.jsx)(a.a,{item:!0,xs:8,children:Object(C.jsx)(v.a,{id:"outlined-basic",label:"Quantidade",variant:"outlined",type:"number",minLength:1,sx:{marginRight:"10px",maxWidth:"200px",marginTop:"20px"},style:{textAlign:"left",width:"100%",float:"left"},value:t.bag["code-".concat(c.code)].quantity,onChange:function(e){var a=e.target.value?parseInt(e.target.value,10):1;(a=a<1?1:a)>0&&(t.bag["code-".concat(c.code)]={product:c,quantity:a,total:(a*parseFloat(c.value)).toFixed(2)},i({type:T.a,bag:t.bag}))}})}),Object(C.jsx)(a.a,{item:!0,xs:4,style:{padding:"0px"},children:Object(C.jsx)(d.a,{variant:"h1",sx:{color:"success.dark"},style:{textAlign:"right",marginTop:"24px"},children:Object(C.jsx)(F,{children:H})})})]})}),Object(C.jsx)(D.a,{style:{borderTop:"1px solid #cecece",padding:"20px 0px 0px 0px"},children:Object(C.jsx)(y.a,{variant:"outlined",onClick:Q,children:"Fechar"})})]})}),Object(C.jsx)(I.a,{open:A,onClose:J,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",id:"dialog-remove",children:Object(C.jsxs)(O.a,{content:!1,style:{padding:"20px"},children:[Object(C.jsxs)(E.a,{style:{padding:"0px",minHeight:"120px",textAlign:"center"},children:[Object(C.jsx)(d.a,{variant:"h3",sx:{color:"#707070",pb:5},children:"DESEJA REMOVER O PRODUTO DA SACOLA?"}),Object(C.jsx)(d.a,{variant:"h2",sx:{pb:5},children:"".concat(c.code," - ").concat(c.description)})]}),Object(C.jsxs)(D.a,{style:{borderTop:"1px solid #cecece",padding:"20px 0px 0px 0px"},children:[Object(C.jsx)(y.a,{variant:"outlined",onClick:J,children:"N\xe3o"}),Object(C.jsx)(y.a,{variant:"outlined",color:"error","data-product":c.code,onClick:function(e){var c="code-".concat(e.currentTarget.getAttribute("data-product")),a=Object.keys(t.bag),n=[];a.map((function(e){e!==c&&(n[e]=t.bag[e])})),i({type:T.a,bag:n})},children:"Sim"})]})]})})]});return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(a.a,{container:!0,spacing:{xs:2,sm:0,md:2,lg:0},columns:{xs:12,sm:12,md:12,lg:12},children:[Object(C.jsx)(a.a,{item:!0,xs:12,sm:12,md:8,lg:8,xl:9,children:Object(C.jsx)(a.a,{container:!0,alignItems:"center",justifyContent:"space-between",children:Object(C.jsxs)(a.a,{item:!0,children:[Object(C.jsxs)(d.a,{variant:n?"h3":"subtitle1",color:"inherit",children:[Object(C.jsx)("strong",{children:c.code})," - ",c.description]}),Object(C.jsx)(d.a,{variant:n?"h4":"subtitle1",sx:{color:"success.dark"},children:Object(C.jsx)(F,{children:H})})]})})}),Object(C.jsxs)(a.a,{item:!0,xs:12,sm:12,md:4,lg:4,xl:3,sx:{textAlign:"right"},children:[V,U]})]},c.code)})})),N=Object(s.b)((function(e){return{search:e.sales}}))((function(e){var t=e.search,c=e.dispatch;function n(){return(n=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={method:"GET",redirect:"follow"},fetch("http://".concat(o.a.host,":").concat(o.a.port,"/services?api=product&search=").concat(t),a).then((function(e){return e.text()})).then((function(e){var a=JSON.parse(e);c({type:T.c,products:a.data,search:t})})).catch((function(e){return console.log("error",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=function(){c({type:T.c,products:[],search:""})};return Object(C.jsxs)(O.a,{sx:{height:"calc(100vh - 131px)",position:"relative"},children:[Object(C.jsx)(a.a,{item:!0,xs:12,children:Object(C.jsxs)(x.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%",border:"1px solid #c7c7c7"},children:[Object(C.jsx)(j.c,{sx:{ml:1,flex:1,width:"100%"},placeholder:"Buscar produto",inputProps:{"aria-label":"Buscar Produto"},value:t.search,onChange:function(e){var t=e.target.value;""===t?s():function(e){n.apply(this,arguments)}(t)},autoFocus:!0}),Object(C.jsx)(p.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(C.jsx)(b.a,{color:"primary",sx:{p:"10px"},"aria-label":"directions",type:"button",onClick:s,children:Object(C.jsx)(u.a,{})})]})}),Object(C.jsx)(a.a,{item:!0,xs:12,style:{marginTop:"10px"},children:Object(C.jsx)(l.a,{style:{maxHeight:"calc(80vh - 60px)",overflow:"auto",marginTop:"10px 10px 10px 10px",padding:"10px 10px 10px 10px"},children:Array.isArray(t.products)?t.products.map((function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)(L,{product:e,addToBagVisible:!0,quantity:0},e.code),Object(C.jsx)(p.a,{sx:{my:1.5}})]},"search-".concat(e.code))})):Object(C.jsx)(d.a,{variant:"h1",children:t.products})})})]})})),P=c(139),Q=c(244),J=c(91),V=c.n(J),H=c(209),U=c.n(H),z=Object(s.b)((function(e){return{products:e.sales}}))((function(e){var t=e.products,c=e.dispatch,n=Object(m.useState)(0),r=Object(g.a)(n,2),i=r[0],s=r[1],x=Object(m.useRef)(!1);Object(m.useEffect)((function(){if(x.current){for(var e=Object.keys(t.bag),c=0,a=0;a<e.length;a++){var n=t.bag[e[a]];c+=parseFloat(n.total)}s(c)}else x.current=!0}));var j=(t.bag?Object.keys(t.bag):[]).map((function(e){var c=t.bag[e].quantity,a=t.bag[e].product;return Object(C.jsxs)("div",{children:[Object(C.jsx)(L,{product:a,addToBagVisible:!1,quantity:c},a.code),Object(C.jsx)(p.a,{sx:{my:1.5}})]},"search-".concat(a.code))}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(O.a,{content:!1,style:{height:"calc(100vh - 195px)",position:"relative"},children:[Object(C.jsx)(a.a,{item:!0,xs:12,children:Object(C.jsx)(l.a,{style:{maxHeight:"calc(80vh - 110px)",overflow:"auto",display:"flex",flexDirection:"column-reverse"},children:Object(C.jsx)(P.a,{children:j})})}),Object(C.jsx)(a.a,{item:!0,xs:12,sx:{p:1.25,pt:0,justifyContent:"center",bottom:0,position:"absolute",width:"100%"},children:Object(C.jsxs)(d.a,{variant:"h1",color:"inherit",children:["Total:",Object(C.jsx)("span",{style:{float:"right"},children:Object(C.jsx)(F,{children:i.toFixed(2)})})]})})]}),Object(C.jsx)(O.a,{content:!1,sx:{height:"65px",position:"relative"},children:Object(C.jsx)(a.a,{item:!0,xs:12,children:Object(C.jsx)(Q.a,{sx:{p:1.25,pt:0},style:{justifyContent:"center",bottom:0,position:"absolute",width:"100%"},children:Object(C.jsxs)(y.a,{variant:"contained",size:"large",disableElevation:!0,sx:{width:"100%"},disabled:!i,onClick:function(){for(var e=Object.keys(t.bag),a=[],n=0;n<e.length;n++){var r=t.bag[e[n]];a.push(r)}var i=new FormData;i.append("data",JSON.stringify(a));var s={method:"POST",body:i,redirect:"follow"};fetch("http://".concat(o.a.host,":").concat(o.a.port,"/services?api=sales"),s).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);U.a.fire({icon:t.status,title:t.data,showConfirmButton:!1,timer:1800}),c({type:T.a,bag:[]}),c({type:T.c,products:[],search:""})})).catch((function(e){return console.log("error",e)}))},children:["FINALIZAR COMPRA",Object(C.jsx)(V.a,{})]})})})})]})}));t.default=function(){return Object(C.jsxs)(a.a,{container:!0,children:[Object(C.jsx)(a.a,{item:!0,xs:12,md:8,children:Object(C.jsx)(N,{})}),Object(C.jsx)(a.a,{item:!0,xs:12,md:4,children:Object(C.jsx)(z,{})})]})}}}]);
//# sourceMappingURL=4.5e365fe8.chunk.js.map